# zwasm Wasm/WASI Compliance Status
# Machine-readable tracking. Updated each iteration.
#
# status: pass | partial | fail | skip | todo
# spec_tests: from test/spec/ (official WebAssembly spec testsuite)
# e2e_tests: from test/e2e/ (wasmtime misc_testsuite port)
#
# Last updated: 2026-02-11
# Spec: 30,001/30,686 (97.8%)
# E2E:  169/179 (94.4%), 68 files

wasm_core:
  # === Wasm 1.0 (MVP) ===
  mvp_i32:
    version: "1.0"
    status: pass
    spec_tests: {total: 461, pass: 461, fail: 0}
  mvp_i64:
    version: "1.0"
    status: pass
    spec_tests: {total: 416, pass: 416, fail: 0}
  mvp_f32:
    version: "1.0"
    status: pass
    spec_tests: {total: 2536, pass: 2536, fail: 0}
    note: "f32, f32_bitwise, f32_cmp"
  mvp_f64:
    version: "1.0"
    status: pass
    spec_tests: {total: 2535, pass: 2535, fail: 0}
    note: "f64, f64_bitwise, f64_cmp"
  mvp_control_flow:
    version: "1.0"
    status: pass
    spec_tests: {}
    note: "block, br, call, call_indirect, if, loop, return, select, unreachable, nop"
  mvp_memory:
    version: "1.0"
    status: pass
    spec_tests: {}
    note: "memory_size, memory_grow, memory_trap, memory_redundancy"
  mvp_table:
    version: "1.0"
    status: partial
    spec_tests: {}
    note: "table_copy has 262 failures (W1 table.copy cross-table)"
  mvp_globals:
    version: "1.0"
    status: pass
    spec_tests: {}
  mvp_conversions:
    version: "1.0"
    status: pass
    spec_tests: {}

  # === Wasm 2.0 (finalized proposals) ===
  sign_extension:
    version: "2.0"
    status: pass
    spec_tests: {}
    note: "7/7 opcodes"
  nontrapping_fptoint:
    version: "2.0"
    status: pass
    spec_tests: {}
    note: "8/8 opcodes"
  bulk_memory:
    version: "2.0"
    status: partial
    spec_tests: {}
    note: "table.copy/init stubbed (W1, W2)"
  reference_types:
    version: "2.0"
    status: pass
    spec_tests: {}
    note: "5/5 opcodes — ref.null, ref.is_null, ref.func, table.get, table.set"
  multi_value:
    version: "2.0"
    status: pass
    spec_tests: {}
  simd_v128:
    version: "2.0"
    status: pass
    spec_tests: {}
    note: "236/236 opcodes. CLI protocol limits v128 value assertions."

  # === Wasm 3.0 (in-progress proposals) ===
  tail_calls:
    version: "3.0"
    status: skip
    note: "Not implemented — roadmap Stage 2+"
  exception_handling:
    version: "3.0"
    status: skip
  gc:
    version: "3.0"
    status: skip
  memory64:
    version: "3.0"
    status: skip
  threads:
    version: "3.0"
    status: skip
  component_model:
    version: "3.0"
    status: skip
    note: "W7"

wasi_preview1:
  args_get: {status: pass}
  args_sizes_get: {status: pass}
  environ_get: {status: pass}
  environ_sizes_get: {status: pass}
  clock_time_get: {status: pass}
  clock_res_get: {status: pass}
  fd_write: {status: pass}
  fd_read: {status: pass}
  fd_close: {status: pass}
  fd_seek: {status: pass}
  fd_tell: {status: pass}
  fd_prestat_get: {status: pass}
  fd_prestat_dir_name: {status: pass}
  fd_fdstat_get: {status: pass}
  fd_fdstat_set_flags: {status: pass}
  fd_filestat_get: {status: pass}
  fd_readdir: {status: todo, note: "W4"}
  fd_renumber: {status: todo, note: "W4"}
  path_open: {status: pass}
  path_filestat_get: {status: pass}
  path_create_directory: {status: pass}
  path_remove_directory: {status: pass}
  path_rename: {status: pass}
  path_unlink_file: {status: pass}
  path_readlink: {status: todo}
  path_symlink: {status: todo}
  proc_exit: {status: pass}
  proc_raise: {status: pass}
  random_get: {status: pass}
  sock_accept: {status: skip, note: "W5 — not planned"}
  sock_recv: {status: skip, note: "W5"}
  sock_send: {status: skip, note: "W5"}
  sock_shutdown: {status: skip, note: "W5"}
  poll_oneoff: {status: todo}

e2e_wasmtime:
  # Batch 1: Core MVP & Traps
  add.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  br-table-fuzzbug.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  call_indirect.wast: {status: partial, assertions: 13, pass: 8, fail: 5, note: "cross-module type signature mismatch"}
  control-flow.wast: {status: pass, assertions: 14, pass: 14, fail: 0}
  div-rem.wast: {status: pass, assertions: 4, pass: 4, fail: 0}
  elem-ref-null.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  elem_drop.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  empty.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  export-large-signature.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  func-400-params.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  imported-memory-copy.wast: {status: pass, assertions: 7, pass: 7, fail: 0}
  linking-errors.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  many-results.wast: {status: pass, assertions: 2, pass: 2, fail: 0}
  many-return-values.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  memory-copy.wast: {status: pass, assertions: 7, pass: 7, fail: 0}
  misc_traps.wast: {status: pass, assertions: 12, pass: 12, fail: 0}
  mul16-negative.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  no-panic.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  no-panic-on-invalid.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  partial-init-memory-segment.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simple-unreachable.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  stack_overflow.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  table_copy.wast: {status: pass, assertions: 7, pass: 7, fail: 0}
  table_copy_on_imported_tables.wast: {status: partial, assertions: 14, pass: 10, fail: 4, note: "cross-module table copy edge cases"}
  table_grow_with_funcref.wast: {status: pass, assertions: 3, pass: 3, fail: 0}

  # Batch 2: Float & Reference Types
  bit-and-conditions.wast: {status: pass, assertions: 29, pass: 29, fail: 0}
  externref-id-function.wast: {status: pass, assertions: 2, pass: 2, fail: 0}
  externref-segment.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  externref-table-dropped-segment-issue-8281.wast: {status: pass, assertions: 3, pass: 3, fail: 0}
  f64-copysign.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  float-round-doesnt-load-too-much.wast: {status: pass, assertions: 4, pass: 4, fail: 0}
  int-to-float-splat.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  many_table_gets_lead_to_gc.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  mutable_externref_globals.wast: {status: pass, assertions: 3, pass: 3, fail: 0}
  no-mixup-stack-maps.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  no-opt-panic-dividing-by-zero.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  partial-init-table-segment.wast: {status: partial, assertions: 2, pass: 1, fail: 1, note: "test runner limitation: assert_uninstantiable side effects"}
  rs2wasm-add-func.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simple_ref_is_null.wast: {status: pass, assertions: 4, pass: 4, fail: 0}
  sink-float-but-dont-trap.wast: {status: pass, assertions: 6, pass: 6, fail: 0}

  # Batch 3: Programs & Regressions
  embenchen_fannkuch.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  embenchen_fasta.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  embenchen_ifs.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  embenchen_primes.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  fib.wast: {status: pass, assertions: 22, pass: 22, fail: 0}
  issue1809.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  issue4840.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  issue4857.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  issue4890.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  issue6562.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  issue694.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  issue11748.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  issue12318.wast: {status: pass, assertions: 2, pass: 2, fail: 0}
  rust_fannkuch.wast: {status: pass, assertions: 0, pass: 0, fail: 0}

  # Batch 4: SIMD
  simd/almost-extmul.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/cvt-from-uint.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/edge-of-memory.wast: {status: pass, assertions: 4, pass: 4, fail: 0}
  simd/interesting-float-splat.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/issue4807.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/issue6725-no-egraph-panic.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/issue_3173_select_v128.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/issue_3327_bnot_lowering.wast: {status: pass, assertions: 2, pass: 2, fail: 0}
  simd/load_splat_out_of_bounds.wast: {status: pass, assertions: 2, pass: 2, fail: 0}
  simd/replace-lane-preserve.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  simd/spillslot-size-fuzzbug.wast: {status: pass, assertions: 1, pass: 1, fail: 0}
  simd/sse-cannot-fold-unaligned-loads.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/unaligned-load.wast: {status: pass, assertions: 0, pass: 0, fail: 0}
  simd/v128-select.wast: {status: pass, assertions: 0, pass: 0, fail: 0}

  # Skipped (unsupported proposals or tooling issues)
  # wide-arithmetic.wast: i64.add128/sub128 (newer proposal)
  # memory-combos.wast: custom page sizes
  # issue11561.wast: exception handling (exnref)
  # simd/canonicalize-nan.wast: nan literal syntax unsupported by wast2json 1.0.39
  # .wat files: issue11563.wat, issue12170.wat (not supported by run_spec.py)
